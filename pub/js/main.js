"use strict";var urlPres="https://studenter.miun.se/~pein2200/writeable/dt173g/projekt/webservice/presentation.php",urlMenu="https://studenter.miun.se/~pein2200/writeable/dt173g/projekt/webservice/menu.php",umamiLink=document.getElementById("umami-link"),menuLink=document.getElementById("menu-link"),reservationLink=document.getElementById("reservation-link"),presentationEl=document.getElementById("presentation"),menuEl=document.getElementById("menu"),reservationEl=document.getElementById("reservation"),presentationContentEl=document.getElementById("presentation-content"),starterEl=document.getElementById("starter"),mainCourseEl=document.getElementById("main-course"),dessertEl=document.getElementById("dessert"),drinksEl=document.getElementById("drinks");function scrollToUmami(){presentationEl.scrollIntoView()}function scrollToMenu(){menuEl.scrollIntoView()}function scrollToReservation(){reservationEl.scrollIntoView()}function init(){getPresentation(),getMenu()}function decode(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}function getPresentation(){fetch(urlPres,{headers:{Apikey:"QOat53BjU09GgFLx3h11kJBdYQP84Fc4"}}).then((function(e){if(200==e.status)return e.json().then((function(e){return printPresentation(e)})).catch((function(e){return console.log(e)}))}))}function printPresentation(e){presentationContentEl.innerHTML="",e.forEach((function(e){var n=decode(e.content);presentationContentEl.innerHTML+="<p>".concat(n,"</p>")}))}function getMenu(){fetch(urlMenu,{headers:{Apikey:"QOat53BjU09GgFLx3h11kJBdYQP84Fc4"}}).then((function(e){if(200==e.status)return e.json().then((function(e){return printMenu(e)})).catch((function(e){return console.log(e)}))}))}function printMenu(e){starterEl.innerHTML="",mainCourseEl.innerHTML="",dessertEl.innerHTML="",drinksEl.innerHTML="",e.forEach((function(e){var n=decode(e.title),t=decode(e.descript);switch(e.category){case"Förrätt":starterEl.innerHTML+="<h4>".concat(n,'</h4>\n                <p class="menu-descript">').concat(t,'</p>\n                <p class="menu-price">').concat(e.price," kr</p>");break;case"Varmrätt":mainCourseEl.innerHTML+="<h4>".concat(n,'</h4>\n                <p class="menu-descript">').concat(t,'</p>\n                <p class="menu-price">').concat(e.price," kr</p>");break;case"Dessert":dessertEl.innerHTML+="<h4>".concat(n,'</h4>\n                <p class="menu-descript">').concat(t,'</p>\n                <p class="menu-price">').concat(e.price," kr</p>");break;case"Dryck":drinksEl.innerHTML+="<h4>".concat(n,'</h4>\n                <p class="menu-descript">').concat(t,'</p>\n                <p class="menu-price">').concat(e.price," kr</p>")}}))}umamiLink.addEventListener("click",scrollToUmami),menuLink.addEventListener("click",scrollToMenu),reservationLink.addEventListener("click",scrollToReservation),window.onload=init;var urlRes="https://studenter.miun.se/~pein2200/writeable/dt173g/projekt/webservice/reservation.php",nameInput=document.getElementById("name"),phoneInput=document.getElementById("phone"),dateInput=document.getElementById("date"),timeInput=document.getElementById("time"),peopleInput=document.getElementById("people"),nameMessageEl=document.getElementById("name-message"),phoneMessageEl=document.getElementById("phone-message"),dateMessageEl=document.getElementById("date-message"),timeMessageEl=document.getElementById("time-message"),reservationBtn=document.getElementById("reservation-btn"),confirmMessageEl=document.getElementById("confirm-message"),newDate=new Date,year=newDate.getFullYear(),month=String(newDate.getMonth()+1).padStart(2,"0"),day=String(newDate.getDate()).padStart(2,"0"),dateNow="".concat(year,"-").concat(month,"-").concat(day);function addReservation(e){e.preventDefault();var n=nameInput.value,t=phoneInput.value,r=dateInput.value,a=timeInput.value,i=peopleInput.value;if(""===n||n.length>125)nameMessageEl.innerHTML="<p>Fyll i ditt namn!</p>";else if(""===t||t.length>125)nameMessageEl.innerHTML="",phoneMessageEl.innerHTML="<p>Fyll i ditt telefonnummer!</p>";else if(""===r)phoneMessageEl.innerHTML="",dateMessageEl.innerHTML="<p>Fyll i ett datum!</p>";else if(""===a||a<"12:00"||a>"23:30")dateMessageEl.innerHTML="",timeMessageEl.innerHTML="<p>Fyll i en tid inom våra öppettider!</p>\n        <p>Vardag 16.00 - 21.00 / Helg 12.00 - 23.30</p>";else{nameMessageEl.innerHTML="",phoneMessageEl.innerHTML="",dateMessageEl.innerHTML="",timeMessageEl.innerHTML="";var o=JSON.stringify({resname:n,resphone:t,resdate:r,restime:a,resquantity:i});fetch(urlRes,{method:"POST",headers:{"content-type":"application/json",Apikey:"QOat53BjU09GgFLx3h11kJBdYQP84Fc4"},body:o}).then((function(e){return e.json()})).then((function(e){return clearForm(r,a,i)})).catch((function(e){return console.log(e)}))}}function clearForm(e,n,t){nameInput.value="",phoneInput.value="",dateInput.value="",timeInput.value="",peopleInput.value="2",confirmMessageEl.innerHTML="<p>Tack för din bokning!</p>\n    <p>Välkommen ".concat(e," kl. ").concat(n,"</p>\n    <p>Antal personer: ").concat(t,"</p>"),confirmMessageEl.scrollIntoView()}dateInput.min=dateNow,peopleInput.value="2",reservationBtn.addEventListener("click",addReservation);